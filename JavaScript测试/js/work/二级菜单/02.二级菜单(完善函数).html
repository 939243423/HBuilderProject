<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			* {
				margin: 0;
				padding: 0;
				list-style-type: none;
			}
			
			a,img {
				border: 0;
				text-decoration: none;
			}
			
			body {
				font: 12px/180% Arial, Helvetica, sans-serif, "新宋体";
			}
		</style>
		<link rel="stylesheet" type="text/css" href="css/sdmenu.css"/>
		<script type="text/javascript">
			window.onload=function(){
				var meanspan=document.querySelectorAll(".menuSpan");
				//定义当前索引
				var openDiv=meanspan[0].parentNode;
				
				
				for(var i=0;i<meanspan.length;i++){
					meanspan[i].onclick=function(){
						//获取span的父元素
						
						var parentDiv=this.parentNode;
						//toggleClass(obj,"collapsed");//执行状态变化显示
						toogleMenu(parentDiv);
						//如果其中一个打开了  另外一个就得关上  需要定义当前索引
						//openDiv 为旧div索引  与新的不一样的 就需要将它添加collasped类
						//但为了统一 函数  都用toggleClass 则需要进行修改  将if多添加一个函数的跳转条件
						//!hasClass(obj, cn) 旧索引没有这个属性 则将旧索引添加该类
						if(openDiv!=parentDiv && !hasClass(openDiv, "collapsed")){
							//toggleClass(openDiv,"collapsed")
							toogleMenu(openDiv);
						}
						//获取每次得到的索引div
						openDiv=parentDiv;
			
					}
					
					
				}
				
				
				
			};
			//切换菜单的动画
			function toogleMenu(obj){
				
						
						
						//调用移动函数   需要获得开始结束位置
						var begin=obj.offsetHeight;
						//由于已经设置了  内联样式  此时设置类高度  并不能执行
						toggleClass(obj,"collapsed");//执行状态变化显示
						var end=obj.offsetHeight;
					
						//将状态重置为开始
						obj.style.height=begin+"px";
						move(obj,"height",end,10,function(){
							//动画执行完毕  内联样式无意义  取消
							obj.style.height="";
							
						});
			}
			
			
			
			
		</script>
		<script type="text/javascript" src="js/tools.js">
			
		</script>
	</head>
	<body>
			<div id="my_menu" class="sdmenu">
			<div>
				<span class="menuSpan">在线工具</span>
				<a href="#">图像优化</a>
				<a href="#">收藏夹图标生成器</a>
				<a href="#">邮件</a>
				<a href="#">htaccess密码</a>
				<a href="#">梯度图像</a>
				<a href="#">按钮生成器</a>
			</div>
			<div class="collapsed">
				<span class="menuSpan">支持我们</span>
				<a href="#">推荐我们</a>
				<a href="#">链接我们</a>
				<a href="#">网络资源</a>
			</div>
			<div class="collapsed">
				<span class="menuSpan">合作伙伴</span>
				<a href="#">JavaScript工具包</a>
				<a href="#">CSS驱动</a>
				<a href="#">CodingForums</a>
				<a href="#">CSS例子</a>
			</div>
			<div class="collapsed">
				<span class="menuSpan">测试电流</span>
				<a href="#">Current or not</a>
				<a href="#">Current or not</a>
				<a href="#">Current or not</a>
				<a href="#">Current or not</a>
			</div>
	</body>
</html>
